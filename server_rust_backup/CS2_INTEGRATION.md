# CS2 Integration - Real-Time Match Stats

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CS2 —á–µ—Ä–µ–∑ Game State Integration (GSI) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–º –º–∞—Ç—á–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üéÆ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –º–∞—Ç—á–µ–π CS2
- üë• –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤ (—Ç–∏–º–µ–π—Ç—ã –∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∏)
- üìä –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–∂–¥–æ–º—É –∏–≥—Ä–æ–∫—É:
  - –ù–∏–∫–Ω–µ–π–º –∏ –∞–≤–∞—Ç–∞—Ä
  - –£—Ä–æ–≤–µ–Ω—å Steam
  - –ß–∞—Å—ã –≤ CS2
  - –£—Ä–æ–≤–µ–Ω—å Faceit (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
  - ELO Faceit
  - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞ Steam
- üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üó∫Ô∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞—Ä—Ç–µ –∏ —Å—á–µ—Ç–µ

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥ GSI –≤ CS2

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `gamestate_integration_bgalin.cfg` –≤ –ø–∞–ø–∫—É:

**Windows:**
```
C:\Program Files (x86)\Steam\steamapps\common\Counter-Strike Global Offensive\game\csgo\cfg\
```

**Linux/Mac:**
```
~/.steam/steam/steamapps/common/Counter-Strike Global Offensive/game/csgo/cfg/
```

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `.env` –∑–∞–ø–æ–ª–Ω–µ–Ω—ã:
```env
STEAM_API_KEY=–≤–∞—à_steam_api_key
STEAM_ID=–≤–∞—à_steam_id_64bit
GSI_AUTH_TOKEN=my_super_secret_token_12345
FACEIT_API_KEY=–≤–∞—à_faceit_api_key  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
```

**–ü–æ–ª—É—á–µ–Ω–∏–µ Faceit API Key (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://developers.faceit.com/
2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ API Key

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

```bash
cd server
cargo run
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://127.0.0.1:8000`

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –º–∞—Ç—á–∞

–ö–æ–≥–¥–∞ –≤—ã –∑–∞—Ö–æ–¥–∏—Ç–µ –≤ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –º–∞—Ç—á CS2:
1. CS2 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ `http://127.0.0.1:8000/api/gsi`
2. –°–µ—Ä–≤–µ—Ä –ø–∞—Ä—Å–∏—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤ (SteamID)
3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —á–µ—Ä–µ–∑ Steam API –∏ Faceit API
4. –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ API

### API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### GET `/api/match` - –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º –º–∞—Ç—á–µ

**–ü—É–±–ª–∏—á–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**

**–û—Ç–≤–µ—Ç (–∞–∫—Ç–∏–≤–Ω—ã–π –º–∞—Ç—á):**
```json
{
  "success": true,
  "data": {
    "is_active": true,
    "is_competitive": true,
    "map_name": "de_dust2",
    "mode": "competitive",
    "round": 5,
    "ct_score": 3,
    "t_score": 2,
    "teammates": [
      "76561198123456789",
      "76561198234567890",
      "76561198345678901",
      "76561198456789012"
    ],
    "opponents": [
      "76561198567890123",
      "76561198678901234",
      "76561198789012345",
      "76561198890123456",
      "76561198901234567"
    ],
    "players": {
      "76561198123456789": {
        "steamid": "76561198123456789",
        "nickname": "Player1",
        "avatar_url": "https://steamcdn-a.akamaihd.net/...",
        "steam_level": 50,
        "cs2_hours": 1234.5,
        "faceit_level": 8,
        "faceit_elo": 1650,
        "account_created": "2015-03-20"
      },
      // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∏–≥—Ä–æ–∫–∏
    },
    "last_updated": 1704123456
  }
}
```

**–û—Ç–≤–µ—Ç (–Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –º–∞—Ç—á–∞):**
```json
{
  "success": false,
  "error": "No active match"
}
```

#### POST `/api/match/clear` - –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ –º–∞—Ç—á–µ

–†—É—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã).

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": "Match data cleared"
}
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –° curl

```bash
# –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º –º–∞—Ç—á–µ
curl http://localhost:8000/api/match

# –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
curl -X POST http://localhost:8000/api/match/clear
```

### –° JavaScript

```javascript
// –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–∞—Ç—á–µ
async function getCurrentMatch() {
  const response = await fetch('http://localhost:8000/api/match');
  const result = await response.json();
  
  if (result.success) {
    const match = result.data;
    console.log(`–ö–∞—Ä—Ç–∞: ${match.map_name}`);
    console.log(`–°—á–µ—Ç: ${match.ct_score} - ${match.t_score}`);
    
    // –í—ã–≤–µ—Å—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ç–∏–º–µ–π—Ç–æ–≤
    match.teammates.forEach(steamid => {
      const player = match.players[steamid];
      console.log(`${player.nickname}: ${player.cs2_hours}—á, Faceit: ${player.faceit_level}`);
    });
    
    // –í—ã–≤–µ—Å—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–æ–≤
    match.opponents.forEach(steamid => {
      const player = match.players[steamid];
      console.log(`${player.nickname}: ${player.cs2_hours}—á, Faceit: ${player.faceit_level}`);
    });
  }
}

// –û–±–Ω–æ–≤–ª—è—Ç—å –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
setInterval(getCurrentMatch, 5000);
```

### Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

```javascript
// –ü–æ—Å—Ç–æ—è–Ω–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
async function pollMatchData() {
  while (true) {
    try {
      const response = await fetch('http://localhost:8000/api/match');
      const result = await response.json();
      
      if (result.success) {
        updateUI(result.data);
      } else {
        showNoActiveMatch();
      }
    } catch (error) {
      console.error('Error fetching match data:', error);
    }
    
    await new Promise(resolve => setTimeout(resolve, 3000)); // 3 —Å–µ–∫—É–Ω–¥—ã
  }
}

pollMatchData();
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–∞

```typescript
interface PlayerStats {
  steamid: string;           // Steam ID –∏–≥—Ä–æ–∫–∞
  nickname: string;          // –ù–∏–∫–Ω–µ–π–º
  avatar_url: string;        // –°—Å—ã–ª–∫–∞ –Ω–∞ –∞–≤–∞—Ç–∞—Ä
  steam_level: number | null;  // –£—Ä–æ–≤–µ–Ω—å Steam (0-5000+)
  cs2_hours: number | null;    // –ß–∞—Å—ã –≤ CS2
  faceit_level: number | null; // –£—Ä–æ–≤–µ–Ω—å Faceit (1-10)
  faceit_elo: number | null;   // ELO Faceit
  account_created: string | null; // –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞ (YYYY-MM-DD)
}
```

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### CS2 –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª `gamestate_integration_bgalin.cfg` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–∞–ø–∫–µ
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ CS2
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å CS2 –Ω–∞ –æ—à–∏–±–∫–∏
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ `127.0.0.1:8000`

### –ù–µ –ø–æ–ª—É—á–∞—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É Faceit

- Faceit API –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π
- –ï—Å–ª–∏ –∫–ª—é—á –Ω–µ —É–∫–∞–∑–∞–Ω, `faceit_level` –∏ `faceit_elo` –±—É–¥—É—Ç `null`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–≥—Ä–æ–∫–∏ –∏–º–µ—é—Ç –∞–∫–∫–∞—É–Ω—Ç—ã Faceit, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫ Steam

### –î–æ–ª–≥–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- Steam API –∏–º–µ–µ—Ç rate limits
- –î–ª—è 10 –∏–≥—Ä–æ–∫–æ–≤ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è 5-10 —Å–µ–∫—É–Ω–¥
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–µ—à–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –≤—Ä–µ–º—è –º–∞—Ç—á–∞

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- GSI —ç–Ω–¥–ø–æ–∏–Ω—Ç –∑–∞—â–∏—â–µ–Ω —Ç–æ–∫–µ–Ω–æ–º (–ø—Ä–æ–≤–µ—Ä–∫–∞ `auth.token`)
- –≠–Ω–¥–ø–æ–∏–Ω—Ç `/api/match` –ø—É–±–ª–∏—á–Ω—ã–π, –Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ –≤–∞—à–µ–≥–æ —Ç–µ–∫—É—â–µ–≥–æ –º–∞—Ç—á–∞
- –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏ Steam –º–æ–≥—É—Ç –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –º–∞—Ç—á–∞—Ö (`mode: "competitive"`)
- Steam API –∏–º–µ–µ—Ç rate limits (~100,000 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –¥–µ–Ω—å)
- Faceit API –∏–º–µ–µ—Ç rate limits (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∞—Ä–∏—Ñ–∞)
- –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏ –º–æ–≥—É—Ç —Å–∫—Ä—ã–≤–∞—Ç—å —á–∞—Å—ã –≤ –∏–≥—Ä–µ

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

–í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- WebSocket –¥–ª—è push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤–º–µ—Å—Ç–æ polling
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏–≥—Ä–æ–∫–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –ò—Å—Ç–æ—Ä–∏—è –º–∞—Ç—á–µ–π
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤–∏–Ω—Ä–µ–π—Ç—É –ø—Ä–æ—Ç–∏–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Leetify, CSRating –∏ –¥—Ä.
